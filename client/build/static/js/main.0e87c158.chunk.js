(this["webpackJsonpreact-social"]=this["webpackJsonpreact-social"]||[]).push([[0],{55:function(e,t,s){},76:function(e,t,s){},77:function(e,t,s){},78:function(e,t,s){},83:function(e,t,s){},84:function(e,t,s){},85:function(e,t,s){},86:function(e,t,s){},87:function(e,t,s){},92:function(e,t,s){},93:function(e,t,s){},94:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),a=s(41),r=s.n(a),i=s(3),l=s.n(i),o=s(5),u=s(8),j=(s(55),s(47)),b=s(17),d=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"FOLLOW":return Object(b.a)(Object(b.a)({},e),{},{user:Object(b.a)(Object(b.a)({},e.user),{},{followings:[].concat(Object(j.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(b.a)(Object(b.a)({},e),{},{user:Object(b.a)(Object(b.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},p=s(0),m={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},O=Object(n.createContext)(m),h=function(e){var t=e.children,s=Object(n.useReducer)(d,m),c=Object(u.a)(s,2),a=c[0],r=c[1];return Object(n.useEffect)((function(){localStorage.setItem("user",JSON.stringify(a.user))}),[a.user]),Object(p.jsx)(O.Provider,{value:{user:a.user,isFetching:a.isFetching,error:a.error,dispatch:r},children:t})},x=s(6),f=s.n(x);function v(){var e=Object(n.useContext)(O).user,t=Object(n.useState)([]),s=Object(u.a)(t,2);s[0],s[1];return Object(p.jsxs)("div",{className:"topbarContainer",children:[Object(p.jsx)("div",{className:"header",children:Object(p.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(p.jsx)("a",{className:"navbar-brand",href:"/",children:Object(p.jsx)("img",{className:"bannerIcon",src:"https://viblo.asia/logo_full.svg"})}),Object(p.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:[Object(p.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(p.jsx)("li",{className:"nav-item active",children:Object(p.jsx)("a",{className:"nav-link",href:"#",children:"B\xe0i Vi\u1ebft"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{className:"nav-link",href:"#",children:"Th\u1ea3o Lu\u1eadn"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{className:"nav-link",href:"#",children:"H\u1ecfi \u0110\xe1p"})})]}),Object(p.jsxs)("form",{className:"form-inline my-2 my-lg-0",children:[Object(p.jsx)("input",{className:"form-control mr-sm-2",type:"search",placeholder:"T\xecm ki\u1ebfm tr\xean Viblo","aria-label":"Search"}),Object(p.jsx)("button",{className:"btn btn-outline-blue my-2 my-sm-0",type:"submit",children:"Search"})]})]}),e?Object(p.jsx)("span",{className:" badge badge-pill badge-primary",children:e.username}):Object(p.jsx)(p.Fragment,{}),Object(p.jsx)("a",{href:"#",onClick:function(){localStorage.clear(),window.location.href="/"},children:"\u0110\u0103ng xu\u1ea5t"})]})}),Object(p.jsx)("img",{className:"banner",src:"https://images.viblo.asia/full/bf6fd90b-e818-4cb4-a025-0ffe3f915ef0.png"}),Object(p.jsx)("div",{className:"banner-list",children:Object(p.jsxs)("ul",{className:"banner-lists",children:[Object(p.jsx)("li",{className:"banner-item banner-item1 ",children:"\u0110ANG THEO D\xd5I"}),Object(p.jsx)("li",{className:"banner-item",children:"M\u1edaI NH\u1ea4T"}),Object(p.jsx)("li",{className:"banner-item",children:"SERIES"}),Object(p.jsx)("li",{className:"banner-item",children:"EDITOR'CHOICES"}),Object(p.jsx)("li",{className:"banner-item",children:"TRENDING"}),Object(p.jsx)("li",{className:"banner-item",children:"VIDEOS"}),Object(p.jsx)("a",{href:"/bookmarks",children:Object(p.jsx)("li",{className:"banner-item",children:"BOOKMARKS C\u1ee6A T\xd4I"})}),Object(p.jsx)("a",{href:"/creat_posts",children:Object(p.jsx)("li",{className:"banner-item-last",children:Object(p.jsx)("button",{type:"button",class:"btn btn-posts",children:"Vi\u1ebft b\xe0i"})})})]})})]})}s(76);var g=s(110),N=s(28),k=(s(77),s(78),function(e){var t=e.comment,s=Object(n.useState)(t.likes.length-t.dislikes.length),c=Object(u.a)(s,2),a=c[0],r=c[1],i=function(){var e=Object(o.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("/comments/"+t._id+"/like",{username:t.username});case 2:s=e.sent,r(s.data.likes.length-s.data.dislikes.length);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(o.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("/comments/"+t._id+"/dislike",{username:t.username});case 2:s=e.sent,r(s.data.likes.length-s.data.dislikes.length);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"commentBody",children:[Object(p.jsx)("span",{className:"userComment",children:t.username}),Object(p.jsx)("span",{className:"comment",post:t,children:t.desc},t._id),Object(p.jsx)("a",{className:"voteUpComment",onClick:i,children:"Vote up"}),Object(p.jsx)("a",{className:"voteComment",children:a}),Object(p.jsx)("a",{className:"voteDownComment",onClick:j,children:"Vote down"}),Object(p.jsx)("hr",{})]})})}),w=function(e){var t=e.username,s=e.postId,c=Object(n.useRef)(),a=function(){var e=Object(o.a)(l.a.mark((function e(n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a={username:t,desc:c.current.value,postId:s},e.prev=2,e.next=5,f.a.post("/comments",a);case 5:window.location.reload(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),r=Object(n.useState)([]),i=Object(u.a)(r,2),j=i[0],b=i[1];return Object(n.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/comments/"+s);case 2:t=e.sent,b(t.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),["comments"]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("form",{class:"input-group mb-3",onSubmit:a,children:[Object(p.jsx)("input",{type:"text",class:"form-control",placeholder:"Vi\u1ebft b\xecnh lu\u1eadn","aria-label":"Recipient's username","aria-describedby":"basic-addon2",ref:c}),Object(p.jsx)("div",{class:"input-group-append",children:Object(p.jsx)("button",{class:"btn btn-primary",type:"submit",children:"B\xecnh Lu\u1eadn"})})]}),j.map((function(e){return Object(p.jsx)(k,{comment:e})}))]})};function y(e){var t=e.post,s=Object(n.useState)({}),c=Object(u.a)(s,2),a=(c[0],c[1]),r=Object(n.useContext)(O).user;Object(n.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/users?userId=".concat(t.userId));case 2:s=e.sent,a(s.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[t.userId]);var i=Object(n.useState)(t.likes.length-t.dislikes.length),j=Object(u.a)(i,2),b=j[0],d=j[1],m=function(){var e=Object(o.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("/posts/"+t._id+"/like",{userId:r._id});case 2:s=e.sent,d(s.data.likes.length-s.data.dislikes.length);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(l.a.mark((function e(){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("/posts/"+t._id+"/dislike",{userId:r._id});case 2:s=e.sent,d(s.data.likes.length-s.data.dislikes.length);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("/users/"+r._id+"/bookmarks",{post:t});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"post",children:[Object(p.jsx)("a",{className:"bookmark",onClick:x,children:"Bookmark"}),Object(p.jsxs)("div",{className:"postWrapper",children:[Object(p.jsxs)("div",{className:"postTop",children:[Object(p.jsxs)("div",{className:"postTopLeft",children:[Object(p.jsx)("span",{className:"postUsername",children:t.username}),Object(p.jsx)("span",{className:"postDate",children:Object(N.a)(t.createdAt)})]}),Object(p.jsx)("div",{className:"postTopRight",children:Object(p.jsx)(g.a,{})})]}),Object(p.jsx)("h5",{children:t.title}),Object(p.jsxs)("div",{className:"postCenter",children:[Object(p.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),Object(p.jsx)("img",{className:"postImg",src:"http://localhost:8800/images/"+t.img,alt:""})]}),Object(p.jsx)("div",{className:"postBottom",children:Object(p.jsxs)("div",{className:"postBottomLeft",children:[Object(p.jsx)("a",{className:"voteUp",onClick:m,style:{color:"blue"},children:"Vote up"}),Object(p.jsx)("span",{className:"postLikeCounter",children:b}),Object(p.jsx)("a",{className:"voteDown",onClick:h,style:{color:"#132"},children:"Vote down"})]})})]}),Object(p.jsx)(w,{username:t.username,postId:t._id})]})}s(83);function I(){var e=Object(n.useContext)(O).user,t=Object(n.useRef)(),s=Object(n.useRef)(),c=Object(n.useState)(!1),a=Object(u.a)(c,2),r=(a[0],a[1],function(){var n=Object(o.a)(l.a.mark((function n(c){var a;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c.preventDefault(),a={userId:e._id,desc:t.current.value,title:s.current.value,username:e.username},n.prev=2,n.next=5,f.a.post("/posts",a);case 5:window.location.reload(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),console.log(n.t0);case 11:case 12:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e){return n.apply(this,arguments)}}());return Object(p.jsx)("div",{className:"share",children:Object(p.jsx)("div",{className:"shareWrapper",children:Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{class:"form-group",children:[Object(p.jsx)("label",{for:"exampleFormControlInput1",children:"Ti\xeau \u0111\u1ec1"}),Object(p.jsx)("input",{type:"email",class:"form-control",id:"exampleFormControlInput1",ref:s})]}),Object(p.jsxs)("div",{class:"form-group",children:[Object(p.jsx)("label",{for:"exampleFormControlTextarea1",children:"M\xf4 t\u1ea3"}),Object(p.jsx)("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3",ref:t})]}),Object(p.jsx)("button",{className:"shareButton",type:"submit",onClick:r,children:"\u0110\u0103ng b\xe0i"})]})})})}s(84),s(85);function C(e){e.username,Object(n.useContext)(O).user;var t=Object(n.useState)([]),s=Object(u.a)(t,2),c=s[0],a=s[1];return Object(n.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("/posts");case 2:t=e.sent,a(t.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),["posts"]),Object(p.jsx)("div",{className:"feed",children:Object(p.jsx)("div",{className:"feedWrapper",children:c.map((function(e){return Object(p.jsx)(y,{post:e},e._id)}))})})}s(86);function S(){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"homeContainer",children:Object(p.jsx)(C,{})})})}s(87);var L=function(){var e=Object(o.a)(l.a.mark((function e(t,s){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"LOGIN_START"}),e.prev=1,e.next=4,f.a.post("/auth/login",t);case 4:n=e.sent,s({type:"LOGIN_SUCCESS",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),s({type:"LOGIN_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,s){return e.apply(this,arguments)}}(),R=s(109),T=s(26);function _(){var e=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useContext)(O),c=s.isFetching,a=s.dispatch;return Object(p.jsx)("div",{className:"login",children:Object(p.jsxs)("div",{className:"loginWrapper",children:[Object(p.jsxs)("div",{className:"loginLeft",children:[Object(p.jsx)("h3",{className:"loginLogo",children:"VIBLO"}),Object(p.jsx)("span",{className:"loginDesc",children:"Ki\u1ebfn n\u1ed1i ki\u1ebfn th\u1ee9c"})]}),Object(p.jsx)("div",{className:"loginRight",children:Object(p.jsxs)("form",{className:"loginBox",onSubmit:function(s){s.preventDefault(),L({email:e.current.value,password:t.current.value},a)},children:[Object(p.jsx)("input",{placeholder:"Email",type:"email",required:!0,className:"loginInput",ref:e}),Object(p.jsx)("input",{placeholder:"M\u1eadt kh\u1ea9u",type:"password",required:!0,minLength:"6",className:"loginInput",ref:t}),Object(p.jsx)("button",{className:"loginButton",type:"submit",disabled:c,children:c?Object(p.jsx)(R.a,{color:"white",size:"20px"}):"\u0110\u0103ng nh\u1eadp"}),Object(p.jsx)("span",{className:"loginForgot",children:"Qu\xean m\u1eadt kh\u1ea9u?"}),Object(p.jsx)(T.b,{to:"/register",children:Object(p.jsx)("button",{className:"loginRegisterButton",children:c?Object(p.jsx)(R.a,{color:"white",size:"20px"}):"T\u1ea1o t\xe0i kho\u1ea3n m\u1edbi"})})]})})]})})}s(92);var E=s(4);function F(){var e=Object(n.useRef)(),t=Object(n.useRef)(),s=Object(n.useRef)(),c=Object(n.useRef)(),a=Object(E.g)(),r=function(){var n=Object(o.a)(l.a.mark((function n(r){var i;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),c.current.value===s.current.value){n.next=5;break}c.current.setCustomValidity("Passwords don't match!"),n.next=15;break;case 5:return i={username:e.current.value,email:t.current.value,password:s.current.value},n.prev=6,n.next=9,f.a.post("/auth/register",i);case 9:a.push("/login"),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(6),console.log(n.t0);case 15:case"end":return n.stop()}}),n,null,[[6,12]])})));return function(e){return n.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"login",children:Object(p.jsxs)("div",{className:"loginWrapper",children:[Object(p.jsxs)("div",{className:"loginLeft",children:[Object(p.jsx)("h3",{className:"loginLogo",children:"VIBLO"}),Object(p.jsx)("span",{className:"loginDesc",children:"Ki\u1ebfn n\u1ed1i ki\u1ebfn th\u1ee9c"})]}),Object(p.jsx)("div",{className:"loginRight",children:Object(p.jsxs)("form",{className:"loginBox",onSubmit:r,children:[Object(p.jsx)("input",{placeholder:"T\xean t\xe0i kho\u1ea3n",required:!0,ref:e,className:"loginInput"}),Object(p.jsx)("input",{placeholder:"Email",required:!0,ref:t,className:"loginInput",type:"email"}),Object(p.jsx)("input",{placeholder:"M\u1eadt kh\u1ea9u",required:!0,ref:s,className:"loginInput",type:"password",minLength:"6"}),Object(p.jsx)("input",{placeholder:"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u",required:!0,ref:c,className:"loginInput",type:"password"}),Object(p.jsx)("button",{className:"loginButton",type:"submit",children:"\u0110\u0103ng k\xed"}),Object(p.jsx)("button",{className:"loginRegisterButton",children:"\u0110\u0103ng nh\u1eadp v\xe0o t\xe0i kho\u1ea3n"})]})})]})})}s(93);var B=function(){var e=Object(n.useContext)(O).user,t=Object(n.useState)([]),s=Object(u.a)(t,2),c=s[0],a=s[1];return Object(n.useEffect)(Object(o.a)(l.a.mark((function t(){var s,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("/users/"+e._id);case 2:s=t.sent,n=s.data.bookmarks,a(n);case 5:case"end":return t.stop()}}),t)}))),["input"]),Object(p.jsx)("div",{children:c.map((function(e){return Object(p.jsxs)("div",{className:"bookmarks",children:[Object(p.jsx)("a",{href:"/posts/".concat(e._id),className:"bookmarksTitle",children:e.title},e._id),Object(p.jsx)("hr",{})]})}))})},D=function(){var e=Object(E.h)().postId,t=Object(n.useState)({}),s=Object(u.a)(t,2),c=s[0],a=s[1];return Object(n.useEffect)((function(){(function(){var t=Object(o.a)(l.a.mark((function t(){var s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("/posts/".concat(e));case 2:s=t.sent,a(s.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),["posts"]),Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"post",children:Object(p.jsxs)("div",{className:"postWrapper",children:[Object(p.jsxs)("div",{className:"postTop",children:[Object(p.jsxs)("div",{className:"postTopLeft",children:[Object(p.jsx)("span",{className:"postUsername",children:c.username}),Object(p.jsx)("span",{className:"postDate",children:Object(N.a)(c.createdAt)})]}),Object(p.jsx)("div",{className:"postTopRight",children:Object(p.jsx)(g.a,{})})]}),Object(p.jsx)("h5",{children:c.title}),Object(p.jsx)("div",{className:"postCenter",children:Object(p.jsx)("span",{className:"postText",children:null===c||void 0===c?void 0:c.desc})}),Object(p.jsx)("div",{className:"postBottom",children:Object(p.jsx)("div",{className:"postBottomLeft"})})]})})})};var A=function(){var e=Object(n.useContext)(O).user;return Object(p.jsx)(T.a,{children:Object(p.jsxs)(E.d,{children:[Object(p.jsx)(E.b,{exact:!0,path:"/",children:e?Object(p.jsxs)(p.Fragment,{children:[" ",Object(p.jsx)(v,{})," ",Object(p.jsx)(S,{})]}):Object(p.jsx)(_,{})}),Object(p.jsx)(E.b,{path:"/login",children:e?Object(p.jsx)(E.a,{to:"/"}):Object(p.jsx)(_,{})}),Object(p.jsx)(E.b,{path:"/register",children:e?Object(p.jsx)(E.a,{to:"/"}):Object(p.jsx)(F,{})}),Object(p.jsxs)(E.b,{path:"/share",children:[Object(p.jsx)(v,{}),e?Object(p.jsx)(I,{}):Object(p.jsx)(_,{})]}),Object(p.jsxs)(E.b,{path:"/bookmarks",children:[Object(p.jsx)(v,{}),Object(p.jsx)(B,{})]}),Object(p.jsxs)(E.b,{path:"/creat_posts",children:[Object(p.jsx)(v,{}),Object(p.jsx)(I,{})]}),Object(p.jsxs)(E.b,{path:"/posts/:postId",children:[Object(p.jsx)(v,{}),Object(p.jsx)(D,{})]})]})})};r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(h,{children:Object(p.jsx)(A,{})})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.0e87c158.chunk.js.map